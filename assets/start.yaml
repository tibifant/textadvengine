start:
  text: |
    Wir befinden uns in einem schnieken Einfamilienhaus. Die Besitzer sind aushaeusig. 
    Nur das juengste Familienmitglied koennen wir im Treppenhaus lokalisieren. Es ist in Begleitung eines ebenfalls noch nicht ausgewachsenen jungen Herrn. Sein Name ist Ringo. Er ist nur hier fuer den schnellen Groschen - er soll den kleinen Fratz hueten.

    Gerade sind sie dabei Rutsche zu spielen.
  responses:
    - nochmal:
        - description: nochmal rutschen
        - goto: rutschen
rutschen:
  text: |
    Ringo traegt seinen infantilen Geldbringer die Stufen hoch.
  responses:
    - absetzen:
        - description: Den Saeugling zum Rutschen absetzen. 
        - goto_message_state: "So und jetzt du alleine - wir haben das balancieren auf dem Gelaender geuebt. Ich renne vor und fange dich unten auf!"
          target_state: realization

realization:
  text: |
    Waehrend Ringo die Stufen herrunterschnellt ueberkommt ihn eine Erkenntnis:
    "Ri ra rutsch… rutsch? Das reimt sich auf futsch! Futsch ist meine grosse Liebe, wenn ich mich nicht bald, um unser Date heute Abend kuemmere!
    Ich brauche noch Luftballons; fuer das richtige Ambiente, Essen; irgendwas beeindruckendes, ein Geschenk; vielleicht Blumen und ich muss besser gekleidet sein, in diesem Aufzug..."
    Ringo schaut an sich herunter, Ringelshirt mit Baeuerchenflecken..
    "...brauche ich heute Abend nicht aufkreuzen und den Babymief muss ich auch noch irgendwie loswerden."
  responses:
    - bad:
      - description: ins Bad gehen
      - goto_message_state_once: Ein dumpfes Geraeusch gefolgt von einem leisen Wimmern ist zu hoeren, waehrend Ringo die Badtuer hinter sich schliesst.
        target_state: bad

bad:
  text: |
    "Hier gibt es viele Dinge - sogar Luftballons habe ich hier schonmal gesehen."
  responses:
    - schrank:
      - description: Schrank oeffnen
      - only_visible_if_state_var_equals: [wunde_gesehen, 0]
      - goto_message_state: "Die Luftballons habe ich in der Schublade gesehen."
    - schrank:
      - description: Schrank oeffnen
      - only_visible_if_state_var_equals: [wunde_gesehen, 1]
      - goto: schrank_bad
    - schublade:
      - description: Schublade oeffnen
      - only_visible_if_item_equals: [luftballons, 0]
      - goto: schublade_bad
    - schublade:
      - description: Schublade oeffnen
      - only_visible_if_item_equals: [luftballons, 1]
      - goto_message_state: "Da gibt's nichts mehr zu holen."
    - treppenhaus:
      - description: ins Treppenhaus gehen
      - only_visible_if_item_equals: [luftballons, 1]
      - only_visible_if_state_var_equals: [wunde_gesehen, 0]
      - goto: wunde
    - treppenhaus:
      - description: ins Treppenhaus gehen
      - only_visible_if_item_equals: [luftballons, 1]
      - only_visible_if_state_var_equals: [wunde_gesehen, 1]
      - only_visible_if_state_var_equals: [baby_nicht_in_wohnzimmer_bemerkt, 1]
      - goto: treppenhaus
    - treppenhaus:
      - description: ins Treppenhaus gehen
      - only_visible_if_item_equals: [luftballons, 1]
      - only_visible_if_state_var_equals: [wunde_gesehen, 1]
      - only_visible_if_state_var_equals: [baby_nicht_in_wohnzimmer_bemerkt, 0]
      - goto_message_state: Aus Richtung der Garagentür hört man Weinen.
        target_state: treppenhaus

schublade_bad:
  text: |
    "Dehnbar und aus Latex, das klingt doch genau wonach wir suchen."
  responses:
    - luftballons:
      - description: Luftballons nehmen
      - only_visible_if_item_equals: [luftballons, 0]
      - give_item: luftballons
      - goto_message_state: "Jetzt fehlt nur noch das Helium."
        target_state: bad

schrank_bad:
  text: |
    Im Schrank gibt es Pflaster.
  responses:
    - pflaster:
      - description: Pflaster nehmen
      - only_visible_if_item_equals: [pflaster, 0]
      - give_item: pflaster
      - goto: bad

wunde:
  text: |
    Auf dem Boden genau unterhalb des Endes des Gelaenders liegt das Kleine und weint.
  responses:
    - hochheben:
      - description: das Baby hochheben
      - only_visible_if_state_var_equals: [wunde_gesehen, 0]
      - set_state_var: [wunde_gesehen, 1]
      - goto_message_state: "Ohje du hast ja ein Aua! Ich bringe dich ins Wohnzimmer und hole eine Pflaster."
        target_state: treppenhaus

wohnzimmer:
  text: |
    Das Wohnzimmer ist gross und gemuetlich.
  responses:
    - ablegen:
      - description: Das Baby ablegen.
      - only_visible_if_state_var_equals: [baby_abgelegt, 0]
      - set_state_var: [baby_abgelegt, 1]
      - goto_message_state: "Hier liegst du gut. Bin gleich wieder da und dann ist das Aua ganz schnell weg!"
    - pflaster:
      - description: Das Baby mit einem Pflaster versorgen.
      - only_visible_if_item_equals: [pflaster, 1]
      - only_visible_if_state_var_equals: [baby_nicht_in_wohnzimmer_bemerkt, 0]
      - set_state_var: [baby_nicht_in_wohnzimmer_bemerkt, 1]
      - goto_message_state: Dort wo Ringo vorhin den Winzling abgelegt hatte, ist jetzt nur noch gähnende Leere. "Oh ähh ohje! Wo bist du nur hin?"
    - treppenhaus:
      - description: ins Treppenhaus gehen
      - goto: treppenhaus

treppenhaus:
  text: |
    Unterhalb der grossen Treppe sieht man einen kleinen Blutfleck.
  responses:
    - bad:
      - description: ins Bad gehen
      - only_visible_if_state_var_equals: [baby_abgelegt, 1]
      - goto: bad
    - bad:
      - description: ins Bad gehen
      - only_visible_if_state_var_equals: [baby_abgelegt, 0]
      - goto_message_state: "Erst muss ich den Patienten in Sicherheit bringen."
    - wohnzimmer:
      - description: ins Wohnzimmer gehen
      - goto: wohnzimmer
    - garage:
      - description: in die Garage gehen
      - only_visible_if_state_var_equals: [baby_abgelegt, 1]
      - only_visible_if_item_equals: [garagenschluessel, 0]
      - only_visible_if_item_equals: [pflaster, 0]
      - goto_message_state: "Die Tuer ist verschlossen."
    - garage:
      - description: in die Garage gehen
      - only_visible_if_state_var_equals: [baby_abgelegt, 1]
      - only_visible_if_item_equals: [garagenschluessel, 0]
      - only_visible_if_item_equals: [pflaster, 1]
      - only_visible_if_state_var_equals: [baby_nicht_in_wohnzimmer_bemerkt, 0]
      - goto_message_state: "Ich kann mich gerade nicht um das Gejaule kümmern, erst muss ich den Patienten verarzten."
    - garage:
      - description: in die Garage gehen
      - only_visible_if_state_var_equals: [baby_abgelegt, 1]
      - only_visible_if_item_equals: [garagenschluessel, 0]
      - only_visible_if_item_equals: [pflaster, 1]
      - only_visible_if_state_var_equals: [baby_nicht_in_wohnzimmer_bemerkt, 1]
      - goto_message_state: "Den Geräuschen zu Folge scheint das Baby in der Garage zu sein. Die Tür ist fest verschlossen. Bestimmt ist es durch die Katzenklappe geklettert. Wer hat denn auch eine Katzenklappe zur Garage?"
    - garage:
      - description: in die Garage gehen
      - only_visible_if_item_equals: [garagenschluessel, 1]
      - goto_message_state: "Was machst du denn auf dem Schrank? Hat die Miezekatze dir etwas Angst gemacht?"
        target_state: garage
