start:
  text: |
    Wir befinden uns in einem schnieken Einfamilienhaus. Die Besitzer sind aushaeusig. 
    Nur das juengste Familienmitglied koennen wir im Treppenhaus lokalisieren. Es ist in Begleitung eines ebenfalls noch nicht ausgewachsenen jungen Herrn. Sein Name ist Ringo. Er ist nur hier fuer den schnellen Groschen - er soll den kleinen Fratz hueten.

    Gerade sind sie dabei Rutsche zu spielen.
  responses:
    - nochmal:
        - description: nochmal rutschen
        - goto: rutschen
rutschen:
  text: |
    Ringo traegt seinen infantilen Geldbringer die Stufen hoch.
  responses:
    - absetzen:
        - description: Den Saeugling zum Rutschen absetzen. 
        - goto_message_state: "So und jetzt du alleine - wir haben das balancieren auf dem Gelaender geuebt. Ich renne vor und fange dich unten auf!"
          target_state: realization

realization:
  text:
    "Waehrend Ringo die Stufen herrunterschnellt ueberkommt ihn eine Erkenntnis:\n
    \"Ri ra rutsch… rutsch? Das reimt sich auf futsch! Futsch ist meine grosse Liebe, wenn ich mich nicht bald, um unser Date heute Abend kuemmere!
    Ich brauche noch Luftballons; fuer das richtige Ambiente, Essen; irgendwas beeindruckendes, ein Geschenk; vielleicht Blumen und ich muss besser gekleidet sein, in diesem Aufzug...\"\n
    Ringo schaut an sich herunter, Ringelshirt mit Bäuerchenflecken...\n
    \"...brauche ich heute Abend nicht aufkreuzen und den Babymief muss ich auch noch irgendwie loswerden.\""
  responses:
    - bad:
      - description: ins Bad gehen
      - goto_message_state_once: Ein dumpfes Geraeusch gefolgt von einem leisen Wimmern ist zu hoeren, waehrend Ringo die Badtuer hinter sich schliesst.
        target_state: bad

bad:
  text: "\"Hier gibt es viele Dinge - sogar Luftballons habe ich hier schonmal gesehen.\""
  responses:
    - schrank:
      - description: Schrank mit Kreuz darauf oeffnen
      - only_visible_if_state_var_equals: [wunde_gesehen, 0]
      - only_visible_if_item_equals: [bad_schrank_schluessel, 1]
      - goto_message_state: "\"Nein, ich will jetzt nicht beten.\""
    - schrank:
      - description: Schrank mit Kreuz darauf oeffnen
      - only_visible_if_state_var_equals: [wunde_gesehen, 0]
      - only_visible_if_item_equals: [bad_schrank_schluessel, 0]
      - goto_message_state: "\"Die Tür ist fest verschlossen\""
    - schrank:
      - description: Schrank mit Kreuz darauf oeffnen
      - only_visible_if_state_var_equals: [wunde_gesehen, 1]
      - only_visible_if_item_equals: [bad_schrank_schluessel, 0]
      - only_visible_if_item_equals: [pflaster, 0]
      - goto_message_state: Die Tuer ist zugeschlossen.
    - schrank:
      - description: Schrank mit Kreuz darauf oeffnen
      - only_visible_if_state_var_equals: [wunde_gesehen, 1]
      - only_visible_if_item_equals: [bad_schrank_schluessel, 0]
      - only_visible_if_item_equals: [pflaster, 1]
      - goto_message_state: "\"Da gibt's nichts mehr zu holen.\""
    - schrank:
      - description: Schrank mit Kreuz darauf oeffnen
      - only_visible_if_state_var_equals: [wunde_gesehen, 1]
      - only_visible_if_item_equals: [bad_schrank_schluessel, 1]
      - remove_item: bad_schrank_schluessel
      - goto_message_state: "\"Bei einem verletzen Kind kann man jede Hilfe gebrauchen! Herrgott, stehe uns bei!\""
        target_state: schrank_bad
    - schublade:
      - description: Schublade oeffnen
      - only_visible_if_item_equals: [luftballons, 0]
      - goto_message_state: "\"Dehnbar und aus Latex, das klingt doch genau wonach wir suchen.\""
        target_state: schublade_bad
    - schublade:
      - description: Schublade oeffnen
      - only_visible_if_item_equals: [luftballons, 1]
      - only_visible_if_item_sum_smaller: [gel, bad_schrank_schluessel, pflaster, 2]
      - goto: schublade_bad
    - schublade:
      - description: Schublade oeffnen
      - only_visible_if_item_equals: [luftballons, 1]
      - only_visible_if_item_equals: [gel, 1]
      - only_visible_if_item_sum_greater: [bad_schrank_schluessel, pflaster, 0]
      - goto_message_state: "\"Da gibt's nichts mehr zu holen.\""
    - treppenhaus:
      - description: ins Treppenhaus gehen
      - only_visible_if_item_equals: [luftballons, 1]
      - only_visible_if_state_var_equals: [wunde_gesehen, 0]
      - goto: wunde
    - treppenhaus:
      - description: ins Treppenhaus gehen
      - only_visible_if_item_equals: [luftballons, 1]
      - only_visible_if_state_var_equals: [wunde_gesehen, 1]
      - only_visible_if_state_var_equals: [baby_nicht_in_wohnzimmer_bemerkt, 1]
      - goto: treppenhaus
    - treppenhaus:
      - description: ins Treppenhaus gehen
      - only_visible_if_item_equals: [luftballons, 1]
      - only_visible_if_state_var_equals: [wunde_gesehen, 1]
      - only_visible_if_state_var_equals: [baby_nicht_in_wohnzimmer_bemerkt, 0]
      - goto_message_state: Aus Richtung der Garagentür hört man Weinen.
        target_state: treppenhaus

schublade_bad:
  text: |
    In der Schublade liegen allerhand Dinge.
  responses:
    - schluessel:
      - description: schluessel mit kleinem Kreuz-Anhaenger nehmen
      - only_visible_if_item_equals: [bad_schrank_schluessel, 0]
      - only_visible_if_item_equals: [pflaster, 0]
      - give_item: bad_schrank_schluessel
    - luftballons:
      - description: Luftballons nehmen
      - only_visible_if_item_equals: [luftballons, 0]
      - give_item: luftballons
      - goto_message_state: "\"Jetzt fehlt nur noch das Helium.\""
    - gel:
      - description: Flasche mit Gel nehmen
      - only_visible_if_item_equals: [gel, 0]
      - give_item: gel
      - goto_message_state:
          "In der Flasche war eine dickfluessige transparente Pampe - \"Ob das wohl Haargel ist?\" - 'sentual' stand darauf.\n
          \"Das muss wohl eine Frisur sein. Perfekt fuer meine Zwecke, mit sowas stehen einem alle Tueren offen!\""
    - schliessen:
      - description: Schublade schliessen.
      - goto: bad

schrank_bad:
  text:
    "Im Schrank gibt es Pflaster. \"Da sieh mal einer an. Das ging schnell! Ich wusste gar nicht, dass Gott so materialistisch ist.\""
  responses:
    - pflaster:
      - description: Pflaster nehmen
      - only_visible_if_item_equals: [pflaster, 0]
      - give_item: pflaster 
      - goto: bad

wunde:
  text: |
    Auf dem Boden genau unterhalb des Endes des Gelaenders liegt das Kleine und weint.
  responses:
    - hochheben:
      - description: das Baby hochheben
      - only_visible_if_state_var_equals: [wunde_gesehen, 0]
      - set_state_var: [wunde_gesehen, 1]
      - goto_message_state: "\"Ohje du hast ja ein Aua! Ich bringe dich ins Wohnzimmer und hole eine Pflaster.\""
        target_state: treppenhaus

wohnzimmer:
  text: |
    Das Wohnzimmer ist gross und gemuetlich.
  responses:
    - ablegen:
      - description: Das Baby ablegen.
      - only_visible_if_state_var_equals: [baby_abgelegt, 0]
      - set_state_var: [baby_abgelegt, 1]
      - goto_message_state: "\"Hier liegst du gut. Bin gleich wieder da und dann ist das Aua ganz schnell weg!\""
    - pflaster:
      - description: Das Baby mit einem Pflaster versorgen.
      - only_visible_if_item_equals: [pflaster, 1]
      - only_visible_if_state_var_equals: [baby_nicht_in_wohnzimmer_bemerkt, 0]
      - set_state_var: [baby_nicht_in_wohnzimmer_bemerkt, 1]
      - goto_message_state: "Dort wo Ringo vorhin den Winzling abgelegt hatte, ist jetzt nur noch gähnende Leere. \"Oh ähh ohje! Wo bist du nur hin?\""
    - treppenhaus:
      - description: ins Treppenhaus gehen
      - goto: treppenhaus

treppenhaus:
  text: |
    Unterhalb der grossen Treppe sieht man einen kleinen Blutfleck.
  responses:
    - bad:
      - description: ins Bad gehen
      - only_visible_if_state_var_equals: [baby_abgelegt, 1]
      - goto: bad
    - bad:
      - description: ins Bad gehen
      - only_visible_if_state_var_equals: [baby_abgelegt, 0]
      - goto_message_state: "\"Erst muss ich den Patienten in Sicherheit bringen.\""
    - wohnzimmer:
      - description: ins Wohnzimmer gehen
      - goto: wohnzimmer
    - garage:
      - description: in die Garage gehen
      - only_visible_if_state_var_equals: [baby_abgelegt, 1]
      - only_visible_if_item_equals: [pflaster, 0]
      - goto_message_state: "\"Die Tuer ist verschlossen.\""
    - garage:
      - description: in die Garage gehen
      - only_visible_if_state_var_equals: [baby_abgelegt, 1]
      - only_visible_if_item_equals: [pflaster, 1]
      - only_visible_if_state_var_equals: [baby_nicht_in_wohnzimmer_bemerkt, 0]
      - goto_message_state: "\"Ich kann mich gerade nicht um das Gejaule kümmern, erst muss ich den Patienten verarzten.\""
    - garage:
      - description: in die Garage gehen
      - only_visible_if_state_var_equals: [baby_abgelegt, 1]
      - only_visible_if_item_equals: [pflaster, 1]
      - only_visible_if_state_var_equals: [baby_nicht_in_wohnzimmer_bemerkt, 1]
      - set_state_var: [katzenklappe_entdeckt, 1]
      - goto_message_state: "\"Den Geräuschen zu Folge scheint das Baby in der Garage zu sein. Die Tür ist fest verschlossen. Bestimmt ist es durch die Katzenklappe geklettert. Wer hat denn auch eine Katzenklappe zur Garage?\""
    - katzenklappe:
      - description: Katzenklappe verwenden
      - only_visible_if_state_var_equals: [katzenklappe_entdeckt, 1]
      - only_visible_if_state_var_equals: [gel_benutzt, 0]
      - set_state_var: [gel_idee, 1]
      - goto_message_state: "\"Keine Chance da pass ich nicht durch. Aber vielleicht ja...\""
    - katzenklappe:
      - description: Katzenklappe verwenden
      - only_visible_if_state_var_equals: [katzenklappe_entdeckt, 1]
      - only_visible_if_state_var_equals: [gel_benutzt, 1]
      - goto_message_state:
          "\"Narghh... grmpf... ächtz... Mehr...Bauch...Einziehen...Geht...Nicht.\"\n
          Ringo vollführt eine akrobatische Meisterleistung wie sie kein Zirkus je gesehen hat. Beeindruckende Gelenkigkeit.\n
          Er robbt in die Garage und nach ein paar ächzenden Atemzügen ist der junge Mann aus Gummi auch schon wieder auf den Beinen und so gewissenhaft wie er seiner Aufgabe als Babysitter nachgeht, schaut er direkt nach dem Wohlbefinden des eben genannten.\n
          ...\n
          Ehhem.\n
          ...\n
          Ich sagte: schaut er direkt nach dem Wohlbefinden des eben genannten.\n
          ...\n
          \"Oh achso nach klar!\n  
           Huch! Was machst du denn auf dem Schrank? Hat die Miezekatze dir etwas Angst gemacht?\"\n
           Man hört ein leises Fauchen."
        target_state: garage
    - pflaster:
      - description: Pflaster verwenden
      - only_visible_if_state_var_equals: [gel_idee, 1]
      - only_visible_if_item_equals: [pflaster, 1]
      - goto_message_state: "\"Zukleben? Wem soll das denn helfen?\""
    - gel:
      - description: Gel verwenden
      - only_visible_if_state_var_equals: [gel_idee, 1]
      - only_visible_if_item_equals: [gel, 1]
      - remove_item: gel
      - set_state_var: [gel_benutzt, 1]
      - goto_message_state: "\"Pui hihi das ist glipschig\""
