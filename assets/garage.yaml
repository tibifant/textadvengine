garage:
  text: |
    Hier gibt es viele Werkzeuge und was der Hobby-Bastler sonst noch so braucht.
  responses:
    - baby:
      - description: zum Baby gehen
      - only_visible_if_state_var_equals: [baby_klebt_an_flasche, 0]
      - goto_message_state: "\"Da komm ich nicht dran, viel zu weit oben.\""
    - klettern:
      - description: auf den Schrank klettern
      - goto_message_state: "Der Schrank faengt an gefaehrlich zu wackeln. \"Das ist mir zu heikel.\""
    - leiter:
      - description: Leiter nehmen
      - only_visible_if_item_equals: [leiter, 0]
      - only_visible_if_state_var_equals: [leiter_benutzt, 0]
      - give_item: leiter
    - leiter:
      - description: Leiter benutzen
      - only_visible_if_item_equals: [leiter, 1]
      - remove_item: leiter
      - set_state_var: [leiter_benutzt, 1]
      - goto_message_state:
          "\"So jetzt komm ich an dich dran. Dann komm mal her!\"\n
          Das Weinen wird lauter.\n
          \"Was ist den los? Du willst nicht? Ah ich weiss, jemand ist hungrig! Lieferservice ist schon unterwegs.\""
    - leiter:
      - description: Leiter benutzen
      - only_visible_if_state_var_equals: [leiter_benutzt, 1]
      - only_visible_if_item_equals: [rote_farbe, 0]
      - only_visible_if_item_equals: [parfum, 0]
      - only_visible_if_item_equals: [milch, 0]
      - only_visible_if_state_var_equals: [leim_gefuettert, 0]
      - goto_message_state:
          "\"So jetzt komm ich an dich dran. Dann komm mal her!\"\n
          Das Weinen wird lauter.\n
          \"Was ist den los? Du willst nicht? Ah ich weiss, jemand ist hungrig! Lieferservice ist schon unterwegs.\""
    - leiter:
      - description: Leiter benutzen
      - only_visible_if_state_var_equals: [leiter_benutzt, 1]
      - only_visible_if_item_sum_greater: [rote_farbe, parfum, milch, 0]
      - only_visible_if_state_var_equals: [leim_gefuettert, 0]
      - only_visible_if_state_var_equals: [baby_klebt_an_flasche, 0]
      - goto_message_state: "\"Mal sehen, ob ich was Gutes für dich gefunden habe...\""
        target_state: garage_fuettern
    - leiter:
      - description: Leiter benutzen
      - only_visible_if_state_var_equals: [leim_gefuettert, 1]
      - only_visible_if_state_var_equals: [baby_klebt_an_flasche, 0]
      - goto: garage_fuettern
    - zurueck:
      - description: zurueck durch die Katzenklappe gehen
      - goto_message_state: "\"Ich hab schon genug Quetschungen da geh ich nicht nochmal durch!\""
    - rot:
      - description: Gefaess mit roter Fluessigkeit nehmen
      - only_visible_if_item_equals: [rote_farbe, 0]
      - give_item: rote_farbe
    - durchsichtig:
      - description: Gefaess mit durchsichtiger Fluessigkeit nehmen
      - only_visible_if_item_equals: [parfum, 0]
      - give_item: parfum
    - weiss:
      - description: Gefaess mit weisser Fluessigkeit nehmen
      - only_visible_if_item_equals: [milch, 0]
      - only_visible_if_state_var_equals: [leim_gefuettert, 0]
      - give_item: milch
    - raus:
      - description: raus gehen
      - only_visible_if_state_var_equals: [baby_klebt_an_flasche, 1]
      - only_visible_if_state_var_equals: [parfum_fuettern, 1]
      - only_visible_if_item_equals: [rote_farbe, 1]
      - goto_message_state: "\"Bevor ich es vergesse, lass mich schnell das Channel No 5 ausprobieren.\""
        target_state: garage_bewusstlos
    - raus:
      - description: raus gehen
      - only_visible_if_state_var_equals: [baby_klebt_an_flasche, 1]
      - only_visible_if_item_equals: [parfum, 1]
      - only_visible_if_item_equals: [rote_farbe, 1]
      - only_visible_if_state_var_equals: [parfum_fuettern, 0]
      - goto_message_state: "Ringo haelt inne. \"Moment, ich hab doch vorhin diese durchsichtige Fluessigkeit eingepackt. Man kann es kaum noch lesen, aber da steht drauf 'Channel No 5'...\" Phantasie hat Ringo! 'Ch' sind die einzigen Buchstaben, die vom verblassten Schriftzug tatsechlich noch sichtbar sind. \"... ein Parfum brauche ich sowieso noch fuer heute Abend, ich werde es direkt ausprobieren\""
        target_state: garage_bewusstlos

garage_fuettern:
  text: |
    Der Sproessling hockt ganz oben auf dem Schrank.
  responses:
    - rot:
      - description: rote Fluessigkeit fuettern
      - only_visible_if_item_equals: [rote_farbe, 1]
      - only_visible_if_state_var_equals: [farbe_fuettern, 0]
      - set_state_var: [farbe_fuettern, 1]
      - goto_message_state: "\"Rote Fluessigkeit? Das brauchen wir gar nicht zu versuchen, Milch ist weiss!\""
        target_state: garage
    - durchsichtig:
      - description: durchsichtige Fluessigkeit fuettern
      - only_visible_if_item_equals: [parfum, 1]
      - only_visible_if_state_var_equals: [parfum_fuettern, 0]
      - set_state_var: [parfum_fuettern, 1]
      - goto_message_state: "Der Text auf der Flasche ist kaum noch lesbar. Er faengt mit 'Ch' an. \"Das ist doch Parfum. Channel No 5 oder sowas! Das erkenne ich auf den ersten Blick. Das kann man doch keinem Baby fuettern! Fuer mein Date heute Abend hingegen kann ich das noch sehr gut gebrauchen.\""
        target_state: garage
    - weiss:
      - description: weisse Fluessigkeit fuettern
      - only_visible_if_item_equals: [milch, 1]
      - remove_item: milch
      - set_state_var: [leim_gefuettert, 1]
      - goto_message_state: "Das Baby verstummt, sobald die Flasche seine Lippen beruehrt. \"Und meine Rechung geht auf, weisse Fluessigkeit = Milch!\""
    - abnehmen:
      - description: Milch wieder abnehmen
      - only_visible_if_state_var_equals: [leim_gefuettert, 1]
      - set_state_var: [baby_klebt_an_flasche, 1]
      - goto_message_state: "Das Baby hatte sich offenbar an der Flasche festgesaugt. \"Auch gut, wenn du so sehr daran haengst will ich sie dir nicht wegnehmen!\" Ringo traegt den Stropp sammt liebgewonnener Milch die Leiter runter."
        target_state: garage
    - runter:
      - description: die Leiter wieder runter klettern
      - goto: garage

garage_bewusstlos:
  text:
    "Ringo wurde ganz schummrig und nach wenigen Sekunden war die Welt für ihn nur noch schwarz.\n
    Nach einger Zeit blinzelt er vorsichtig.\n
    \"Parfüm: Check! Das hat reingehauen!\"
    Nach noch ein bisschen mehr Zeit regt sich wieder etwas.\n
    \"Wo bin ich eigentlich? Das muss wohl wieder eins meiner berühmten ungewollten Mittagsschläfchen gewesen sein, die passieren sonst nur beim Zahnarzt.\"
    Ringos Augen fallen wieder zu. Nach einer Weile erneutes Blinzeln.\n
    \"Wo ist eigentlich das Baby?\" Ringo tastet neben sich den Boden ab. \"Ah puh da bist du ja. Warst du schon immer so pelzig?\"\n
    Das nächste was Ringo spürt sind Krallen in seiner Hand."
  responses:
    - suchen:
      - description: das Baby suchen
      - goto: garage_suche

garage_suche:
  text: |
    Irgendwo muss das Baby doch sein.
  responses:
    - leiter:
      - description: Leiter benutzen
      - goto_message_state: Gähnende Leere auf dem Schrank.
    - zurueck:
      - description: zurueck durch die Katzenklappe gehen
      - goto_message_state: "\"Falls es da nochmal durch gegangen ist, ist es ja in Sicherheit. Ich gehe da jedenfalls nicht nochmal durch!\""
    - sofa:
      - description: unterm alten Sofa nachsehen
      - goto_message_state: "\"Pah nur Spinnweben!\""
    - katze:
      - description: Katze fragen
      - only_visible_if_state_var_equals: [spur_gefunden, 0]
      - set_state_var: [spur_gefunden, 1]
      - goto_message_state:
          "\"Na komm putt putt putt, such das Baby\"\n 
          Die Katze schaut nur verdiesslich und folgt der dunklen Spur auf dem Boden Richtung Tuer, setzt sich davor und maunzt.\n
          \"Typisch Katze, zu nichts zu gebrauchen.\""
    - spur:
      - description: "\"Moment mal... 'Folgt der dunklen Spur' welche Spur?\""
      - only_visible_if_state_var_equals: [spur_gefunden, 1]
      - goto_message_state: Eine braeunliche Spur zieht sich ueber den Boden.
    - begutachten:
      - description: Spur begutachten
      - only_visible_if_state_var_equals: [spur_gefunden, 1]
      - goto_message_state: "\"Bah riecht widerlich. Und führt zur Tür nach draußen...\""
    - raus:
      - description: raus gehen
      - only_visible_if_state_var_equals: [spur_gefunden, 0]
      - goto_message_state: "\"Ich muss erst sicher stellen, dass niemand in dieser Garage zurück bleibt. Das ist ein gefährlicher Ort mit Ohnmacht und so.\""
    - raus:
      - description: raus gehen
      - only_visible_if_state_var_equals: [spur_gefunden, 1]
      - goto_message_state: "\"Och neee hier gibt's auch ne Katzenklappe!\" Gerade als Ringo zögernd, sehr zögernd, seinen Kopf durch die Klappe steckt, springt die Katze auf, fängt die Türklinke in der Luft und die Tür schwingt sammt Ringo auf."
        target_state: garten 
